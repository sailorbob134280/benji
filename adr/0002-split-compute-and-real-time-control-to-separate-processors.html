

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2. Split compute and real time control to separate processors &mdash; Benji Documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=414a3882" />

  
    <link rel="shortcut icon" href="../_static/logo.png"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script type="module" src="../_static/js/custom.js?v=13a5d2d9"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3. Use Zephyr for the RT control core" href="0003-use-zephyr-for-the-rt-control-core.html" />
    <link rel="prev" title="1. Record architecture decisions" href="0001-record-architecture-decisions.html" />
  <meta name="color-scheme" content="dark light">
  
  <noscript id="dark-mode-toggle-stylesheets">
    <link rel="stylesheet" href="../_static/css/light.css" type="text/css" media="(prefers-color-scheme: light)"/>
    <link rel="stylesheet" href="../_static/css/dark.css" type="text/css" media="(prefers-color-scheme: dark)"/>
  </noscript>
  <script src="../_static/js/dark-mode-toggle-stylesheets-loader.min.js"></script>
  <script type="module" src="../_static/js/dark-mode-toggle.min.mjs"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div class="search-container" role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="search" name="q" placeholder="Search docs"
           aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  <div data-nosnippet>
    
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../architecture/index.html">Architecture</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../architecture/index.html#architectural-decision-records">Architectural Decision Records</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="0001-record-architecture-decisions.html">1. Record architecture decisions</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">2. Split compute and real time control to separate processors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#status">Status</a></li>
<li class="toctree-l4"><a class="reference internal" href="#context">Context</a></li>
<li class="toctree-l4"><a class="reference internal" href="#decision">Decision</a></li>
<li class="toctree-l4"><a class="reference internal" href="#consequences">Consequences</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="0003-use-zephyr-for-the-rt-control-core.html">3. Use Zephyr for the RT control core</a></li>
<li class="toctree-l3"><a class="reference internal" href="0004-use-embedded-linux-via-yocto-for-the-compute-platform.html">4. Use embedded linux via Yocto for the compute platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="0005-version-and-build-all-apps-as-a-single-entity.html">5. Version and build all apps as a single entity</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../gnc/index.html">Guidance, Navigation, and Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware/index.html">Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projects/index.html">Projects</a></li>
</ul>

    
  </div>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Benji</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!--  -->
  
  
  
  

  <li><a href="../index.html">Docs</a> &raquo;</li>
  
     <li><a href="../architecture/index.html">Architecture</a> &raquo;</li>
  
  <li>2. Split compute and real time control to separate processors</li>


  <li class="wy-breadcrumbs-aside">
    <dark-mode-toggle id="dark-mode-toggle" appearance="toggle" permanent="true"/>
  </li>
  <li class="wy-breadcrumbs-aside">
  </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="split-compute-and-real-time-control-to-separate-processors">
<h1>2. Split compute and real time control to separate processors<a class="headerlink" href="#split-compute-and-real-time-control-to-separate-processors" title="Link to this heading"></a></h1>
<p>Date: 2025-11-23</p>
<section id="status">
<h2>Status<a class="headerlink" href="#status" title="Link to this heading"></a></h2>
<p>Accepted</p>
</section>
<section id="context">
<h2>Context<a class="headerlink" href="#context" title="Link to this heading"></a></h2>
<p>Benji’s capabilities can be broadly divided into two categories: compute-intensive tasks (such as image processing and path planning) and real-time control tasks (such as motor control and sensor data acquisition). The sensor and actuator list is currently baselined as follows:</p>
<ul class="simple">
<li><p>Sensors:</p>
<ul>
<li><p>Camera (for image processing)</p></li>
<li><p>6-axis IMU (accelerometer and gyro)</p></li>
<li><p>3-axis magnetometer</p></li>
<li><p>Linear ToF distance sensor</p></li>
<li><p>4x quadrature encoders (for wheel odometry)</p></li>
</ul>
</li>
<li><p>Actuators:</p>
<ul>
<li><p>4x DC gearmotors with individual drivers</p></li>
<li><p>1x servo motor (for camera tilt)</p></li>
</ul>
</li>
</ul>
<p>Typically, in the interest of reducing complexity and cost, we’d prefer to run all tasks on a single application processor. Low-latency real-time tasks can be pinned to specific cores, and the Linux PREEMPT-RT kernel patch might be applied. However, it turns out it’s not easy to find a specific board with adequate I/O capabilities without turning to a custom board, which is outside our capabilities to design. Splitting the I/O and low-latency control tasks to a microcontroller will still benefit from a custom board, but the complexity is significantly lower, and it’s quite straightforward to find an MCU with the I/O and compute capabilities required. For compute, this significantly widens the range of suitable off-the-shelf SBCs, in particular allowing us to leverage the Raspberry Pi ecosystem.</p>
</section>
<section id="decision">
<h2>Decision<a class="headerlink" href="#decision" title="Link to this heading"></a></h2>
<p>We will split Benji’s compute and real-time control tasks to separate processors. A microcontroller (MCU) will handle real-time control tasks, interfacing directly with sensors and actuators. An application processor (SBC) will handle compute-intensive tasks, communicating with the MCU over high-bandwidth serial.</p>
</section>
<section id="consequences">
<h2>Consequences<a class="headerlink" href="#consequences" title="Link to this heading"></a></h2>
<p>This allows much of the real-time control complexity to be deferred to the MCU, which can typically make use of hardware peripherals (particularly the quadrature decoders, which is difficult to implement accurately without a dedicated hardware timer). The MCU can also leverage other ecosystems that have most of the drivers required. The SBC can then focus all its resources on compute tasks, and there is no need to worry about a RT kernel.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
<p>
  &#169; Copyright 2025, Cave in the Mountains.
</p>

  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>